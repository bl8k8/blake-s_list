(this.webpackJsonpblake_list=this.webpackJsonpblake_list||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n(1),a=n.n(s),c=n(3),o=n(4),u=n(2),i=n(16),l=n.n(i),p=n(6),j=n.n(p),d="https://strangers-things.herokuapp.com/api/2007-UNF-RM-WEB-PT";function f(){return(f=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat(d,"/posts/").concat(n),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(c.a)(a.a.mark((function e(t){var n,r,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat(d,"/posts"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 3:return n=e.sent,r=n.data,s=r.data.posts,console.log(s),e.abrupt("return",s);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function x(){return(x=Object(c.a)(a.a.mark((function e(t,n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat(d,"/posts/").concat(n,"/messages"),{message:{content:r}},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n,r,s){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark((function e(t,n,r,s,c){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("".concat(d,"/posts"),{post:{title:n,description:r,price:"$"+s,willDeliver:c}},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return j.a.get("".concat(d,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return e.data}))}var k=function(e){return Object(r.jsx)("button",{className:e.id,style:e.style,onClick:function(t){t.preventDefault(),e.handler()},value:"This is a sample",children:e.text})},w=(n(41),function(e){var t=Object(u.useState)(""),n=Object(o.a)(t,2),s=n[0],i=n[1],l=Object(u.useState)(""),p=Object(o.a)(l,2),f=p[0],b=p[1],h=e.setUser,x=e.setToken;return Object(r.jsxs)("form",{children:[Object(r.jsx)("label",{children:"Username:"}),Object(r.jsx)("input",{type:"text",id:"username",onInput:function(e){e.preventDefault(),i(e.target.value)}}),Object(r.jsx)("label",{children:"Password:"}),Object(r.jsx)("input",{type:"password",id:"password",onInput:function(e){e.preventDefault(),b(e.target.value)}}),Object(r.jsx)(k,{text:"Register",handler:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=s,n=f,j.a.post("".concat(d,"/users/register"),{user:{username:t,password:n}})).then(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.data.token){e.next=6;break}return x(t.data.data.token),e.next=4,m(t.data.data.token);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){h(e)}));case 2:case"end":return e.stop()}var t,n}),e)})))}),Object(r.jsx)(k,{text:"Log in",handler:Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=s,n=f,j.a.post("".concat(d,"/users/login"),{user:{username:t,password:n}})).then(function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.data.token){e.next=6;break}return x(t.data.data.token),e.next=4,m(t.data.data.token);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){h(e)}));case 2:case"end":return e.stop()}var t,n}),e)})))})]})}),g=function(e){var t=e.user,n=e.setUser,s=e.setPosts,a=e.token,c=e.setToken;return Object(r.jsx)("div",{id:"Header",children:t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:["Welcome to Blake's List ",t.data.username,"!"]}),Object(r.jsx)(k,{text:"All Posts",handler:function(){b(a).then((function(e){return s(e)}))}}),Object(r.jsx)(k,{text:"My Messages",handler:function(){b(a).then((function(e){var t=[];e.map((function(e){e.messages[0]&&t.push(e)})),s(t)}))}}),Object(r.jsx)(k,{text:"My Posts",handler:function(){b(a).then((function(e){var n=[];e.map((function(e){e.author.username===t.data.username&&n.push(e)})),s(n)}))}}),Object(r.jsx)(k,{text:"Log Out",handler:function(){n(null),c("")}})]}):Object(r.jsx)(w,{setUser:n,setToken:c})})},y=function(e){var t=Object(u.useState)(null),n=Object(o.a)(t,2),s=n[0],a=n[1],c=e.token,i=e.id;e.posts;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("input",{className:"message",onInput:function(e){a(e.target.value)}}),Object(r.jsx)(k,{text:"Send Message",handler:function(){!function(e,t,n){x.apply(this,arguments)}(c,i,s)}})]})},P=(n(42),function(e){var t=e.posts,n=e.setPosts,s=e.user,o=e.token;return Object(r.jsxs)(r.Fragment,{children:[" ",t.map((function(e,u){return Object(r.jsxs)("div",{className:"post",children:[Object(r.jsxs)("h3",{children:["Title: ",e.title]}),Object(r.jsxs)("div",{children:["Author: ",e.author.username]}),Object(r.jsxs)("div",{children:["Price: ",e.price]}),Object(r.jsxs)("div",{children:["Description: ",e.description]}),Object(r.jsxs)("div",{children:["Will Deliver:"," ",e.willDeliver?"Will Deliver":"Will not Deliver"]}),e.messages[0]?e.messages.map((function(e,t){return Object(r.jsxs)("div",{className:"messageInfo",children:[Object(r.jsxs)("div",{className:"note",children:["Message: ",e.content]},"note"+t),Object(r.jsxs)("div",{className:"from",children:["From: ",e.fromUser.username]},"from"+t)]},"message"+t)})):null,s&&s.data.username!==e.author.username?Object(r.jsx)(y,{token:o,id:e._id,posts:t}):null,s&&s.data.username===e.author.username?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(k,{text:"Delete Post",handler:function(){(function(e,t){return f.apply(this,arguments)})(o,e._id).then(function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(o).then(function(){var e=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})}):null]},"post".concat(u))}))]})}),D=(n(43),function(e){var t=e.token,n=Object(u.useState)(""),s=Object(o.a)(n,2),i=s[0],l=s[1],p=Object(u.useState)(""),j=Object(o.a)(p,2),d=j[0],f=j[1],b=Object(u.useState)(""),h=Object(o.a)(b,2),x=h[0],v=h[1],m=Object(u.useState)(!0),k=Object(o.a)(m,2),w=k[0],g=k[1];return Object(r.jsxs)("div",{id:"newPost",style:{display:"flex",flexDirection:"column"},children:[Object(r.jsx)("label",{children:"Title"}),Object(r.jsx)("input",{type:"text",id:"newPostTitle",onInput:function(e){l(e.target.value)}}),Object(r.jsx)("label",{children:"Description"}),Object(r.jsx)("input",{type:"text",id:"newPostDescription",onInput:function(e){f(e.target.value)}}),Object(r.jsx)("label",{children:"Price"}),Object(r.jsx)("input",{type:"text",id:"newPostPrice",onInput:function(e){v(e.target.value)}}),Object(r.jsx)("label",{children:"Will you Deliver?(Defaults to yes)"}),Object(r.jsxs)("select",{className:"willDeliver",onInput:function(e){g(e.target.value)},children:[Object(r.jsx)("optgroup",{label:"Choose one"}),Object(r.jsx)("option",{value:!0,children:"Yes"}),Object(r.jsx)("option",{value:!1,children:"No"})]}),Object(r.jsx)("input",{type:"submit",onClick:function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,i,d,x,w);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}),T=(n(44),function(e){var t=e.setPosts,n=e.token,s=Object(u.useState)(""),i=Object(o.a)(s,2),l=i[0],p=i[1];return Object(r.jsxs)("footer",{children:[Object(r.jsx)("label",{children:"Search:"}),Object(r.jsx)("input",{className:"searchBar",value:l,onInput:function(){var e=Object(c.a)(a.a.mark((function e(r){var s,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.target.value,c=[],p(s),e.next=5,b(n);case 5:o=e.sent,console.log(s),o.map((function(e){e.title.includes(s)&&c.push(e)})),t(c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})}),S=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],s=t[1],i=Object(u.useState)(null),l=Object(o.a)(i,2),p=l[0],j=l[1],d=Object(u.useState)(""),f=Object(o.a)(d,2),h=f[0],x=f[1];return Object(u.useEffect)(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(h).then((function(e){s(e)}));case 2:case"end":return e.stop()}}),e)}))),[h]),Object(r.jsxs)("div",{children:[Object(r.jsx)(g,{setPosts:s,user:p,setUser:j,token:h,setToken:x}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(T,{setPosts:s,token:h}),Object(r.jsx)(P,{setPosts:s,posts:n,user:p,token:h})]}),p?Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(D,{token:h})}):null]})]})};l.a.render(Object(r.jsx)(S,{}),document.getElementById("app"))}},[[45,1,2]]]);
//# sourceMappingURL=main.3447fcf5.chunk.js.map